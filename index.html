<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>SA Money Tools | Tax, Bond & Vehicle Calculator</title>
<meta name="description" content="Free South African financial tools: SARS Tax Calculator (2025), Vehicle Finance, Bond Repayment, and Wealth Planner.">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="theme-color" content="#1a202c">

<style>
:root { --bg: #f3f4f6; --card: #ffffff; --text: #1f2937; --primary: #2563eb; --accent: #10b981; --border: #e5e7eb; }
[data-theme="dark"] { --bg: #111827; --card: #1f2937; --text: #f9fafb; --primary: #60a5fa; --accent: #34d399; --border: #374151; }

body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 0; transition: 0.3s; }
.wrapper { max-width: 600px; margin: 0 auto; padding: 15px; min-height: 100vh; }

/* Navigation Tabs */
.nav-tabs { display: flex; gap: 10px; overflow-x: auto; padding-bottom: 10px; margin-bottom: 20px; scrollbar-width: none; }
.nav-tabs::-webkit-scrollbar { display: none; }
.tab-btn { background: var(--card); border: 1px solid var(--border); color: var(--text); padding: 10px 20px; border-radius: 25px; font-weight: 600; white-space: nowrap; cursor: pointer; flex-shrink: 0; transition: 0.2s; font-size: 14px; }
.tab-btn.active { background: var(--primary); color: white; border-color: var(--primary); box-shadow: 0 4px 10px rgba(37, 99, 235, 0.3); }

/* Sections */
.tool-section { display: none; animation: fadeIn 0.4s ease; }
.tool-section.active { display: block; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

/* Cards & Inputs */
.card { background: var(--card); padding: 25px; border-radius: 16px; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05); border: 1px solid var(--border); margin-bottom: 20px; }
h2 { margin-top: 0; font-size: 1.2rem; display: flex; align-items: center; gap: 8px; }
label { display: block; font-weight: 600; font-size: 0.85em; margin-bottom: 8px; color: var(--text); opacity: 0.8; }
input, select { width: 100%; padding: 14px; border: 1px solid var(--border); border-radius: 10px; font-size: 16px; background: var(--bg); color: var(--text); box-sizing: border-box; margin-bottom: 15px; }
input:focus { border-color: var(--primary); outline: none; }

.btn-calc { width: 100%; padding: 16px; background: var(--primary); color: white; border: none; border-radius: 12px; font-size: 16px; font-weight: bold; cursor: pointer; }
.btn-calc:active { opacity: 0.9; transform: scale(0.98); }

/* Results Box */
.result-box { margin-top: 20px; padding-top: 20px; border-top: 2px dashed var(--border); display: none; }
.res-row { display: flex; justify-content: space-between; margin-bottom: 10px; font-size: 0.95rem; }
.res-val { font-weight: bold; }
.res-total { font-size: 1.3rem; color: var(--accent); font-weight: 800; margin-top: 10px; text-align: right; }

/* Dark Mode Toggle */
.top-bar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
.theme-btn { background: none; border: none; font-size: 1.5rem; cursor: pointer; }

.disclaimer { font-size: 0.75rem; color: var(--text); opacity: 0.6; text-align: center; margin-top: 30px; }
</style>
</head>
<body>

<div class="wrapper">
<div class="top-bar">
<h1 style="margin:0; font-size:1.4rem;">üáøüá¶ Money Tools</h1>
<button class="theme-btn" onclick="toggleTheme()">üåì</button>
</div>

<div class="nav-tabs">
<button class="tab-btn active" onclick="switchTab('tax', this)">üí∏ Tax (PAYE)</button>
<button class="tab-btn" onclick="switchTab('vehicle', this)">üöó Car</button>
<button class="tab-btn" onclick="switchTab('bond', this)">üè† Bond</button>
<button class="tab-btn" onclick="switchTab('wealth', this)">üìà Savings</button>
</div>

<div id="tax" class="tool-section active">
<div class="card">
<h2>üí∏ Income Tax Estimator</h2>
<label>Gross Monthly Income (R)</label>
<input type="number" id="tax_income" placeholder="25000">
<label>Age Bracket</label>
<select id="tax_age">
<option value="primary">Under 65</option>
<option value="secondary">65 - 74</option>
<option value="tertiary">75 and older</option>
</select>
<button class="btn-calc" onclick="calcTax()">Calculate Take Home</button>

<div id="res-tax" class="result-box">
<div class="res-row"><span>Gross Income:</span> <span class="res-val" id="rt_gross">R0</span></div>
<div class="res-row" style="color:#ef4444;"><span>Estimated Tax (PAYE):</span> <span class="res-val" id="rt_paye">R0</span></div>
<div class="res-row" style="color:#ef4444;"><span>UIF (1%):</span> <span class="res-val" id="rt_uif">R0</span></div>
<div class="res-row" style="margin-top:15px; border-top:1px solid var(--border); padding-top:10px;">
<span style="font-weight:bold;">Net Pay (Take Home):</span>
</div>
<div class="res-total" id="rt_net">R0.00</div>
</div>
</div>
</div>

<div id="vehicle" class="tool-section">
<div class="card">
<h2>üöó Vehicle Finance</h2>
<label>Vehicle Price (R)</label>
<input type="number" id="car_price" placeholder="300000">
<label>Deposit (Optional)</label>
<input type="number" id="car_deposit" value="0">
<label>Interest Rate (%)</label>
<input type="number" id="car_rate" value="11.75">
<label>Payment Period</label>
<select id="car_months">
<option value="60">60 Months (5 Years)</option>
<option value="72">72 Months (6 Years)</option>
<option value="48">48 Months (4 Years)</option>
</select>
<button class="btn-calc" onclick="calcCar()">Calculate Installment</button>

<div id="res-car" class="result-box">
<div class="res-row"><span>Loan Amount:</span> <span class="res-val" id="rc_loan">R0</span></div>
<div class="res-row"><span>Total Interest:</span> <span class="res-val" id="rc_interest">R0</span></div>
<div class="res-total" id="rc_total">R0 /pm</div>
</div>
</div>
</div>

<div id="bond" class="tool-section">
<div class="card">
<h2>üè† Bond Repayment</h2>
<label>Property Price (R)</label>
<input type="number" id="bond_price" placeholder="1200000">
<label>Deposit (Optional)</label>
<input type="number" id="bond_deposit" value="0">
<label>Interest Rate (%)</label>
<input type="number" id="bond_rate" value="11.75">
<label>Term (Years)</label>
<select id="bond_years">
<option value="20">20 Years</option>
<option value="30">30 Years</option>
<option value="15">15 Years</option>
</select>
<button class="btn-calc" onclick="calcBond()">Calculate Repayment</button>

<div id="res-bond" class="result-box">
<div class="res-row"><span>Loan Amount:</span> <span class="res-val" id="rb_loan">R0</span></div>
<div class="res-row"><span>Total Cost over term:</span> <span class="res-val" id="rb_total_cost">R0</span></div>
<div class="res-total" id="rb_monthly">R0 /pm</div>
</div>
</div>
</div>

<div id="wealth" class="tool-section">
<div class="card">
<h2>üìà Savings Planner</h2>
<label>Starting Amount (R)</label>
<input type="number" id="save_start" value="1000">
<label>Monthly Contribution (R)</label>
<input type="number" id="save_monthly" value="500">
<label>Annual Return (%)</label>
<input type="number" id="save_rate" value="10">
<label>Years</label>
<input type="number" id="save_years" value="10">
<button class="btn-calc" onclick="calcSave()">Project Wealth</button>

<div id="res-save" class="result-box">
<div class="res-row"><span>Total Contributed:</span> <span class="res-val" id="rs_contrib">R0</span></div>
<div class="res-row" style="color:var(--accent);"><span>Interest Earned:</span> <span class="res-val" id="rs_interest">R0</span></div>
<div class="res-total" id="rs_final">R0.00</div>
</div>
</div>
</div>

<p class="disclaimer">
Disclaimer: All calculations are estimates. Tax calculations based on 2024/2025 SARS tables but exclude specific deductions. Consult a professional.
</p>
</div>

<script>
// FIXED TABS LOGIC (Strict Mode Safe)
function switchTab(id, btn) {
// Hide all sections
document.querySelectorAll('.tool-section').forEach(el => el.classList.remove('active'));
// Deactivate all buttons
document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));

// Activate chosen section
document.getElementById(id).classList.add('active');
// Activate chosen button
btn.classList.add('active');
}

// FORMATTER
const fmt = new Intl.NumberFormat('en-ZA', { style: 'currency', currency: 'ZAR' });

// 1. TAX LOGIC (2025 Tables)
function calcTax() {
const monthly = parseFloat(document.getElementById('tax_income').value) || 0;
const annual = monthly * 12;
let tax = 0;

// 2025 Brackets
if (annual <= 237100) {
tax = annual * 0.18;
} else if (annual <= 370500) {
tax = 42678 + (annual - 237100) * 0.26;
} else if (annual <= 512800) {
tax = 77362 + (annual - 370500) * 0.31;
} else if (annual <= 673000) {
tax = 121475 + (annual - 512800) * 0.36;
} else if (annual <= 857900) {
tax = 179147 + (annual - 673000) * 0.39;
} else if (annual <= 1817000) {
tax = 251258 + (annual - 857900) * 0.41;
} else {
tax = 644489 + (annual - 1817000) * 0.45;
}

// Rebates
const age = document.getElementById('tax_age').value;
let rebate = 17235; // Primary
if (age === 'secondary') rebate += 9444;
if (age === 'tertiary') rebate += (9444 + 3145);

tax = Math.max(0, tax - rebate);
const uif = Math.min(monthly * 0.01, 177.12);
const monthlyTax = tax / 12;

document.getElementById('rt_gross').innerText = fmt.format(monthly);
document.getElementById('rt_paye').innerText = fmt.format(monthlyTax);
document.getElementById('rt_uif').innerText = fmt.format(uif);
document.getElementById('rt_net').innerText = fmt.format(monthly - monthlyTax - uif);
document.getElementById('res-tax').style.display = 'block';
}

// 2. VEHICLE LOGIC
function calcCar() {
const P = (parseFloat(document.getElementById('car_price').value) || 0) - (parseFloat(document.getElementById('car_deposit').value) || 0);
const r = (parseFloat(document.getElementById('car_rate').value) || 0) / 100 / 12;
const n = parseFloat(document.getElementById('car_months').value);

const monthly = (P * r * Math.pow(1 + r, n)) / (Math.pow(1 + r, n) - 1);
const total = monthly * n;

document.getElementById('rc_loan').innerText = fmt.format(P);
document.getElementById('rc_interest').innerText = fmt.format(total - P);
document.getElementById('rc_total').innerText = fmt.format(monthly) + " /pm";
document.getElementById('res-car').style.display = 'block';
}

// 3. BOND LOGIC
function calcBond() {
const P = (parseFloat(document.getElementById('bond_price').value) || 0) - (parseFloat(document.getElementById('bond_deposit').value) || 0);
const r = (parseFloat(document.getElementById('bond_rate').value) || 0) / 100 / 12;
const n = (parseFloat(document.getElementById('bond_years').value) || 0) * 12;

const monthly = (P * r * Math.pow(1 + r, n)) / (Math.pow(1 + r, n) - 1);
const total = monthly * n;

document.getElementById('rb_loan').innerText = fmt.format(P);
document.getElementById('rb_total_cost').innerText = fmt.format(total);
document.getElementById('rb_monthly').innerText = fmt.format(monthly) + " /pm";
document.getElementById('res-bond').style.display = 'block';
}

// 4. SAVINGS LOGIC (With Safety Check)
function calcSave() {
const P = parseFloat(document.getElementById('save_start').value) || 0;
const PMT = parseFloat(document.getElementById('save_monthly').value) || 0;
const r = (parseFloat(document.getElementById('save_rate').value) || 0) / 100 / 12;
const n = (parseFloat(document.getElementById('save_years').value) || 0) * 12;

let futureValue;

// FIXED: Safety check for 0% interest
if (r === 0) {
futureValue = P + (PMT * n);
} else {
futureValue = P * Math.pow(1 + r, n) + (PMT * (Math.pow(1 + r, n) - 1)) / r;
}

const totalContrib = P + (PMT * n);

document.getElementById('rs_contrib').innerText = fmt.format(totalContrib);
document.getElementById('rs_interest').innerText = fmt.format(futureValue - totalContrib);
document.getElementById('rs_final').innerText = fmt.format(futureValue);
document.getElementById('res-save').style.display = 'block';
}

// THEME LOGIC
function toggleTheme() {
const body = document.body;
const isDark = body.getAttribute('data-theme') === 'dark';
body.setAttribute('data-theme', isDark ? 'light' : 'dark');
}
</script>

</body>
</html>
